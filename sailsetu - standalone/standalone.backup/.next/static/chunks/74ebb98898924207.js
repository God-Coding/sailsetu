(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},56909,e=>{"use strict";let t=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>t],56909)},63209,e=>{"use strict";let t=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},69638,e=>{"use strict";let t=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},98049,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(37322),l=e.i(18566),i=e.i(75254);let r=(0,i.default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),n=(0,i.default)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var o=e.i(56909),d=e.i(63209),c=e.i(69638),m=e.i(31278),u=e.i(94918);function x(){let{isAuthenticated:e,url:i,username:x,password:h,isLoading:p}=(0,a.useAuth)(),g=(0,l.useRouter)(),[b,f]=(0,s.useState)({name:"",description:"",owner:"",email:"",capabilities:"",members:""}),[y,w]=(0,s.useState)(null),[j,v]=(0,s.useState)("single"),[N,k]=(0,s.useState)(null),[A,C]=(0,s.useState)(null),[S,R]=(0,s.useState)([]),[W,M]=(0,s.useState)(!1),[P,$]=(0,s.useState)(!1),F=["SystemAdministrator","ApplicationAdministrator","IdentityAdministrator","RoleAdministrator","AccessManager","Auditor","BatchRequestAdministrator","BusinessRoleAdministrator","CertificationAdministrator","ComplianceOfficer","ManagedAttributeProvisioningAdmin","ManagedAttributePropertyAdmin","EntitlementRoleAdministrator","FormAdministrator","FullAccessAdminConsole","HelpDesk","IdentityCorrelationAdministrator","IdentityRequestAdministrator","ITRoleAdministrator","OrganizationalRoleAdministrator","PasswordAdministrator","PluginAdministrator","PolicyAdministrator","RuleAdministrator","SCIMExecutor","SignOffAdministrator","SyslogAdministrator","TaskResultsViewer","ViewAdminConsole","WebServicesExecutor","WorkgroupAdministrator","WorkItemAdministrator"].sort(),I=e=>{let t,s=b.capabilities?b.capabilities.split(",").map(e=>e.trim()).filter(Boolean):[];t=s.includes(e)?s.filter(t=>t!==e):[...s,e],f({...b,capabilities:t.join(",")})},B=b.capabilities?b.capabilities.split(",").map(e=>e.trim()).filter(Boolean):[],E=async e=>{e.preventDefault(),M(!0),w(null);try{let e=[{key:"workgroupName",value:b.name},{key:"description",value:b.description},{key:"ownerName",value:b.owner},{key:"email",value:b.email},{key:"capabilities",value:b.capabilities},{key:"members",value:b.members}],t=await fetch("/api/workflow/launch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:i,username:x,password:h,workflowName:"CreateWorkgroup",input:e})}),s=await t.json();if(s.success){let e="Workflow launched successfully.";if(s.launchResult&&s.launchResult.attributes){let t=s.launchResult.attributes.find(e=>"result"===e.key);t&&(e=t.value)}e.startsWith("Error")?w({success:!1,message:e}):(w({success:!0,message:e}),f({name:"",description:"",owner:"",email:"",capabilities:"",members:""}),$(!1))}else w({success:!1,message:s.error||"API Error"})}catch(e){w({success:!1,message:e.message})}finally{M(!1)}},O=async e=>{let t=(await e.text()).split("\n"),s=t[0].split(",").map(e=>e.trim()),a=[];for(let e=1;e<t.length;e++){if(!t[e].trim())continue;let l=t[e].split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);if(l&&l.length>0){let e={};s.forEach((t,s)=>{let a=l[s]?l[s].trim():"";a.startsWith('"')&&a.endsWith('"')&&(a=(a=a.slice(1,-1)).replace(/""/g,'"')),e[t]=a}),a.push(e)}}return a},T=async()=>{if(N){M(!0),R([]),C({total:0,current:0,success:0,fail:0});try{let e=await O(N);C({total:e.length,current:0,success:0,fail:0});let t=0,s=async e=>{let t=e.name||e.workgroupName||"Unknown",s=[{key:"workgroupName",value:e.name||e.workgroupName},{key:"description",value:e.description},{key:"ownerName",value:e.owner||e.ownerName},{key:"email",value:e.email},{key:"capabilities",value:e.capabilities},{key:"members",value:e.members}];try{let e=await fetch("/api/workflow/launch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:i,username:x,password:h,workflowName:"CreateWorkgroup",input:s})}),a=await e.json();if(a.success){let e="Success";if(a.launchResult&&a.launchResult.attributes){let t=a.launchResult.attributes.find(e=>"result"===e.key);t&&(e=t.value)}e.startsWith("Error")?(R(s=>[`[FAIL] ${t}: ${e}`,...s]),C(e=>e?{...e,fail:e.fail+1,current:e.current+1}:null)):(R(s=>[`[OK] ${t}: ${e}`,...s]),C(e=>e?{...e,success:e.success+1,current:e.current+1}:null))}else throw Error(a.error||"Unknown API Error")}catch(e){R(s=>[`[FAIL] ${t}: ${e.message}`,...s]),C(e=>e?{...e,fail:e.fail+1,current:e.current+1}:null)}},a=async()=>{for(;t<e.length;){let a=t++;if(a>=e.length)break;await s(e[a])}},l=Array(Math.min(5,e.length)).fill(null).map(()=>a());await Promise.all(l)}catch(e){R(t=>[`[FATAL] Batch failed: ${e.message}`,...t])}finally{M(!1)}}};return p?(0,t.jsx)("main",{className:"min-h-screen bg-[#020617] flex items-center justify-center",children:(0,t.jsx)(m.Loader2,{className:"h-8 w-8 text-indigo-500 animate-spin"})}):e?(0,t.jsxs)("main",{className:"min-h-screen bg-[#020617] text-slate-100 font-sans selection:bg-indigo-500/30",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 w-full h-[500px] bg-gradient-to-b from-blue-950/20 to-transparent pointer-events-none"}),(0,t.jsxs)("div",{className:"max-w-4xl mx-auto p-6 relative z-10",children:[(0,t.jsxs)("div",{className:"mb-8 border-b border-white/5 pb-6 flex justify-between items-end",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-extrabold bg-gradient-to-r from-white via-slate-200 to-slate-400 bg-clip-text text-transparent flex items-center gap-3",children:[(0,t.jsx)(r,{className:"h-8 w-8 text-indigo-400"}),"single"===j?"Create Workgroup":"Batch Create Workgroups"]}),(0,t.jsx)("p",{className:"text-slate-400 text-sm mt-2",children:"single"===j?"Create new Workgroups and assign initial members.":"Upload CSV to create multiple workgroups."})]}),(0,t.jsxs)("div",{className:"bg-slate-900 border border-slate-700 p-1 rounded-lg flex",children:[(0,t.jsx)("button",{onClick:()=>v("single"),className:`px-4 py-2 rounded-md text-sm font-medium transition-all ${"single"===j?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-white"}`,children:"Single"}),(0,t.jsx)("button",{onClick:()=>v("batch"),className:`px-4 py-2 rounded-md text-sm font-medium transition-all ${"batch"===j?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-white"}`,children:"Batch CSV"})]})]}),(0,t.jsx)("div",{className:"bg-slate-900/40 backdrop-blur-xl border border-white/10 p-8 rounded-2xl shadow-xl",children:"single"===j?(0,t.jsxs)("form",{onSubmit:E,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Workgroup Name *"}),(0,t.jsx)("input",{type:"text",value:b.name,onChange:e=>f({...b,name:e.target.value}),className:"w-full bg-slate-950/50 border border-slate-700 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 outline-none transition-all placeholder:text-slate-600",placeholder:"e.g., AD-Admins-WG",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Description"}),(0,t.jsx)("textarea",{value:b.description,onChange:e=>f({...b,description:e.target.value}),className:"w-full bg-slate-950/50 border border-slate-700 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 outline-none transition-all placeholder:text-slate-600 min-h-[80px]",placeholder:"Purpose of this workgroup..."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Owner Identity Name"}),(0,t.jsx)("input",{type:"text",value:b.owner,onChange:e=>f({...b,owner:e.target.value}),className:"w-full bg-slate-950/50 border border-slate-700 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 outline-none transition-all placeholder:text-slate-600",placeholder:"e.g., spadmin"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Group Email"}),(0,t.jsx)("input",{type:"email",value:b.email,onChange:e=>f({...b,email:e.target.value}),className:"w-full bg-slate-950/50 border border-slate-700 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 outline-none transition-all placeholder:text-slate-600",placeholder:"group@example.com"})]})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Capabilities (Rights)"}),B.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:B.map(e=>(0,t.jsxs)("span",{className:"bg-indigo-500/20 text-indigo-300 border border-indigo-500/30 px-2 py-1 rounded text-xs flex items-center gap-1",children:[e,(0,t.jsx)("button",{type:"button",onClick:()=>I(e),className:"hover:text-white",children:"×"})]},e))}),(0,t.jsxs)("button",{type:"button",onClick:()=>$(!P),className:"w-full bg-slate-950/50 border border-slate-700 rounded-lg px-4 py-3 text-left text-slate-300 focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 outline-none transition-all flex justify-between items-center",children:[(0,t.jsx)("span",{children:0===B.length?"Select Capabilities...":`Selected ${B.length} capabilities`}),(0,t.jsx)("span",{className:"text-slate-500",children:"▼"})]}),P&&(0,t.jsx)("div",{className:"absolute z-50 mt-1 w-full bg-slate-900 border border-slate-700 rounded-lg shadow-2xl max-h-60 overflow-y-auto",children:F.map(e=>(0,t.jsxs)("div",{onClick:()=>I(e),className:`px-4 py-2 cursor-pointer text-sm flex items-center gap-2 hover:bg-slate-800 transition-colors ${B.includes(e)?"bg-indigo-900/30 text-indigo-300":"text-slate-300"}`,children:[(0,t.jsx)("div",{className:`w-4 h-4 rounded border flex items-center justify-center ${B.includes(e)?"bg-indigo-500 border-indigo-500":"border-slate-600"}`,children:B.includes(e)&&(0,t.jsx)(c.CheckCircle,{className:"w-3 h-3 text-white"})}),e]},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Members (Native Identity Names)"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("textarea",{value:b.members,onChange:e=>f({...b,members:e.target.value}),className:"w-full bg-slate-950/50 border border-slate-700 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 outline-none transition-all placeholder:text-slate-600 min-h-[100px]",placeholder:"e.g., James.Smith, Linda.Johnson"}),(0,t.jsx)(n,{className:"absolute top-3 right-3 h-5 w-5 text-slate-600"})]}),(0,t.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Check comma-separated list of identity names."})]}),y&&(0,t.jsxs)("div",{className:`p-4 rounded-lg flex items-start gap-3 ${y.success?"bg-emerald-950/30 border border-emerald-500/20 text-emerald-400":"bg-rose-950/30 border border-rose-500/20 text-rose-400"}`,children:[y.success?(0,t.jsx)(c.CheckCircle,{className:"h-5 w-5 shrink-0"}):(0,t.jsx)(d.AlertCircle,{className:"h-5 w-5 shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:y.success?"Success":"Error"}),(0,t.jsx)("p",{className:"text-sm opacity-90",children:y.message})]})]}),(0,t.jsx)("div",{className:"pt-4",children:(0,t.jsx)("button",{type:"submit",disabled:W,className:"w-full bg-gradient-to-r from-indigo-500 to-violet-500 hover:from-indigo-400 hover:to-violet-400 text-white font-bold py-3 px-6 rounded-xl shadow-lg shadow-indigo-500/20 transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:W?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.Loader2,{className:"h-5 w-5 animate-spin"})," Creating..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Save,{className:"h-5 w-5"})," Create Workgroup"]})})})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"p-6 bg-slate-950/30 border border-dashed border-slate-700 rounded-xl text-center",children:[(0,t.jsxs)("label",{className:"block cursor-pointer",children:[(0,t.jsx)("span",{className:"text-indigo-400 font-medium",children:"Click to Upload CSV"}),(0,t.jsx)("input",{type:"file",className:"hidden",accept:".csv",onChange:e=>{e.target.files&&e.target.files[0]&&k(e.target.files[0])}}),(0,t.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Format: name, description, owner, email, capabilities, members"})]}),N&&(0,t.jsxs)("div",{className:"mt-4 flex items-center justify-center gap-2 text-emerald-400 bg-emerald-950/20 py-2 px-4 rounded-full text-sm font-mono",children:[(0,t.jsx)(u.FileSpreadsheet,{className:"h-4 w-4"})," ",N.name]})]}),A&&(0,t.jsxs)("div",{className:"bg-slate-950/50 rounded-xl p-6 border border-white/5 space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center text-sm mb-2",children:[(0,t.jsx)("span",{className:"text-slate-300 font-medium",children:"Batch Progress"}),(0,t.jsxs)("span",{className:"text-indigo-400",children:[A.current," / ",A.total]})]}),(0,t.jsx)("div",{className:"w-full bg-slate-800 rounded-full h-2.5 overflow-hidden",children:(0,t.jsx)("div",{className:"bg-gradient-to-r from-indigo-500 to-violet-500 h-2.5 rounded-full transition-all duration-300",style:{width:`${A.current/A.total*100}%`}})}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-slate-500",children:[(0,t.jsxs)("span",{className:"text-emerald-400",children:["Success: ",A.success]}),(0,t.jsxs)("span",{className:"text-rose-400",children:["Failed: ",A.fail]})]})]}),S.length>0&&(0,t.jsx)("div",{className:"max-h-60 overflow-y-auto bg-black/40 rounded-lg p-4 font-mono text-xs space-y-1 border border-white/5",children:S.map((e,s)=>(0,t.jsx)("div",{className:e.includes("[FAIL]")?"text-rose-400":"text-emerald-400/80",children:e},s))}),(0,t.jsx)("div",{className:"pt-4",children:(0,t.jsx)("button",{onClick:T,disabled:W||!N,className:"w-full bg-gradient-to-r from-indigo-500 to-violet-500 hover:from-indigo-400 hover:to-violet-400 text-white font-bold py-3 px-6 rounded-xl shadow-lg shadow-indigo-500/20 transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:W?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.Loader2,{className:"h-5 w-5 animate-spin"})," Processing Batch..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.FileSpreadsheet,{className:"h-5 w-5"})," Start Batch Creation"]})})})]})})]})]}):(g.push("/"),null)}e.s(["default",()=>x],98049)}]);