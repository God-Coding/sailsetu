(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,45294,e=>{"use strict";var t=e.i(43476),a=e.i(71645),l=e.i(7717),s=e.i(75254);let r=(0,s.default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),i=(0,s.default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var n=e.i(51737);let o=(0,s.default)("badge-check",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var c=e.i(58377),d=e.i(18566);function u(){let{url:e,username:s,password:u,isAuthenticated:x}=(0,l.useAuth)(),m=(0,d.useRouter)(),[h,g]=(0,a.useState)(!1),[b,p]=(0,a.useState)(null),[f,v]=(0,a.useState)(""),[j,y]=(0,a.useState)(""),[N,w]=(0,a.useState)(!1),[k,S]=(0,a.useState)(s),[A,E]=(0,a.useState)("TRAKK"),[C,T]=(0,a.useState)("capability"),[R,M]=(0,a.useState)("super");(0,a.useEffect)(()=>{x||m.push("/")},[x,m]),(0,a.useEffect)(()=>{if(!h||!b)return;let e=setInterval(()=>{let t=b-Date.now();if(t<=0)g(!1),p(null),v("00:00:00"),clearInterval(e);else{let e=Math.floor(t/36e5),a=Math.floor(t%36e5/6e4),l=Math.floor(t%6e4/1e3);v(`${e.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`)}},1e3);return()=>clearInterval(e)},[h,b]);let I=async()=>{if(j&&k&&A){w(!0);try{let t=[{key:"identityName",value:k},{key:"durationMinutes",value:"60"},{key:"targetApp",value:A},{key:"attributeName",value:C},{key:"attributeValue",value:R}],a=await fetch("/api/workflow/launch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e,username:s,password:u,workflowName:"SetEmergencyAccess",input:t})}),l=await a.json();if(l.success&&l.launchResult&&l.launchResult.attributes){let e=l.launchResult.attributes.find(e=>"expiryTimestamp"===e.key);e&&(p(Number(e.value)),g(!0))}else console.error("Failed to activate",l)}catch(e){console.error(e)}finally{w(!1)}}},O=async()=>{if(k&&A){w(!0);try{let t=[{key:"identityName",value:k},{key:"targetApp",value:A},{key:"attributeName",value:C},{key:"attributeValue",value:R}],a=await fetch("/api/workflow/launch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e,username:s,password:u,workflowName:"RevokeEmergencyAccess",input:t})});(await a.json()).success?(g(!1),p(null),alert("Access Revoked Successfully.")):alert("Failed to revoke access. Please check SailPoint logs.")}catch(e){console.error(e),alert("Error invoking revocation workflow.")}finally{w(!1)}}};return x?(0,t.jsxs)("div",{className:"min-h-screen bg-slate-950 text-white font-sans flex flex-col items-center justify-center p-4 relative overflow-hidden",children:[(0,t.jsx)("div",{className:`absolute inset-0 transition-opacity duration-1000 ${h?"opacity-20":"opacity-5"}`,children:(0,t.jsx)("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-red-900 via-slate-900 to-slate-900 animate-pulse"})}),(0,t.jsxs)("div",{className:"z-10 max-w-2xl w-full",children:[(0,t.jsxs)("div",{className:"text-center mb-12",children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center p-4 bg-slate-900 rounded-full border border-slate-700 mb-6 shadow-2xl",children:h?(0,t.jsx)(c.Flame,{className:"h-12 w-12 text-red-500 animate-bounce"}):(0,t.jsx)(n.ShieldAlert,{className:"h-12 w-12 text-slate-400"})}),(0,t.jsx)("h1",{className:"text-4xl font-bold tracking-tight mb-2",children:h?(0,t.jsx)("span",{className:"text-red-500",children:"EMERGENCY MODE ACTIVE"}):"Firefighter Access"}),(0,t.jsx)("p",{className:"text-slate-400",children:h?"All actions are being logged. Access will automatically expire.":"Request temporary administrative privileges for emergency maintenance."})]}),(0,t.jsx)("div",{className:`bg-slate-900/80 backdrop-blur-xl border ${h?"border-red-500/50 shadow-red-900/20":"border-slate-800"} rounded-2xl p-8 shadow-2xl transition-all duration-500`,children:h?(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("div",{className:"text-8xl font-mono font-bold text-red-500 mb-8 tabular-nums tracking-widest drop-shadow-[0_0_15px_rgba(239,68,68,0.5)]",children:f}),(0,t.jsxs)("div",{className:"w-full bg-slate-800 rounded-lg p-4 mb-8 border border-slate-700",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 text-slate-300 mb-2",children:[(0,t.jsx)(o,{className:"text-emerald-500"}),(0,t.jsxs)("span",{children:["Privileges Granted to ",k]})]}),(0,t.jsxs)("div",{className:"text-sm text-slate-500 pl-9 space-y-1",children:[(0,t.jsxs)("p",{children:["Target: ",(0,t.jsx)("span",{className:"text-slate-300",children:A})]}),(0,t.jsxs)("p",{children:["Entitlement: ",(0,t.jsxs)("span",{className:"text-slate-300",children:[C," = ",R]})]})]})]}),(0,t.jsx)("button",{onClick:O,className:"w-full py-4 rounded-xl bg-slate-800 hover:bg-slate-700 border border-slate-600 text-white font-bold transition-all",children:"TERMINATE SESSION"})]}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Target Identity"}),(0,t.jsx)("input",{type:"text",value:k,onChange:e=>S(e.target.value),className:"w-full bg-slate-950 border border-slate-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-red-500 outline-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Application"}),(0,t.jsx)("input",{type:"text",value:A,onChange:e=>E(e.target.value),className:"w-full bg-slate-950 border border-slate-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-red-500 outline-none"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Entitlement Name"}),(0,t.jsx)("input",{type:"text",value:C,onChange:e=>T(e.target.value),className:"w-full bg-slate-950 border border-slate-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-red-500 outline-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Entitlement Value"}),(0,t.jsx)("input",{type:"text",value:R,onChange:e=>M(e.target.value),className:"w-full bg-slate-950 border border-slate-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-red-500 outline-none"})]})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Reason for Access"}),(0,t.jsx)("textarea",{value:j,onChange:e=>y(e.target.value),placeholder:"Database outage incident INC-2039...",className:"w-full bg-slate-950 border border-slate-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-red-500 outline-none h-24 resize-none transition-all placeholder:text-slate-600"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-8 p-4 bg-orange-500/10 border border-orange-500/20 rounded-xl",children:[(0,t.jsx)(r,{className:"text-orange-500 shrink-0"}),(0,t.jsx)("div",{className:"text-sm text-orange-200",children:"This action will trigger a security alert. Session limited to 60m."})]}),(0,t.jsx)("button",{onClick:I,disabled:!j||N,className:`w-full py-4 rounded-xl font-bold text-lg shadow-lg flex items-center justify-center gap-2 transition-all ${!j||N?"bg-slate-800 text-slate-500 cursor-not-allowed":"bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-500 hover:to-orange-500 text-white shadow-orange-900/20 group"}`,children:N?(0,t.jsx)(i,{className:"animate-spin"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Flame,{className:`${j?"group-hover:animate-pulse":""}`}),"ACTIVATE EMERGENCY ACCESS"]})})]})})]})]}):null}e.s(["default",()=>u],45294)}]);