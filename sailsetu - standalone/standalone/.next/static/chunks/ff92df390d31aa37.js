(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},31343,e=>{"use strict";let t=(0,e.i(75254).default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);e.s(["Play",()=>t],31343)},91e3,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(37322),l=e.i(18566),r=e.i(95116),i=e.i(31343),n=e.i(31278);let o=(0,e.i(75254).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);function c(){let{url:e,username:c,password:u,isAuthenticated:x}=(0,a.useAuth)(),h=(0,l.useRouter)(),[m,p]=(0,s.useState)(""),[b,f]=(0,s.useState)(!1),[g,j]=(0,s.useState)([]),[w,y]=(0,s.useState)([]);(0,s.useEffect)(()=>{x||h.push("/")},[x,h]);let v=async()=>{if(!m)return;f(!0),j([]),y([]);let t=[{key:"requestId",value:m}];try{j(e=>[`Launching maintenance for Request #${m}...`,...e]);let s=await fetch("/api/workflow/launch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e,username:c,password:u,workflowName:"RepairIdentityRequest",input:t})}),a=await s.json();if(a.success){if(j(e=>["Workflow completed.",...e]),a.launchResult&&a.launchResult.attributes){let e=a.launchResult.attributes.find(e=>"maintenanceLog"===e.key);if(e&&e.value){let t=e.value.split("\n");j(e=>[...t.reverse(),...e])}}}else j(e=>[`Error: ${a.error||"Workflow failed"}`,...e])}catch(e){j(t=>[`Exception: ${e.message}`,...t])}finally{f(!1)}};return x?(0,t.jsxs)("main",{className:"min-h-screen bg-slate-950 p-8 text-slate-100 font-sans selection:bg-indigo-500/30",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 w-full h-[500px] bg-gradient-to-b from-blue-950/20 to-transparent pointer-events-none"}),(0,t.jsxs)("div",{className:"max-w-5xl mx-auto relative z-10",children:[(0,t.jsxs)("div",{className:"mb-8 border-b border-white/5 pb-6",children:[(0,t.jsxs)("h1",{className:"text-3xl font-extrabold bg-gradient-to-r from-teal-400 to-emerald-400 bg-clip-text text-transparent flex items-center gap-3",children:[(0,t.jsx)(r.Wrench,{className:"h-8 w-8 text-emerald-400"}),"Request Maintenance (ID Scope)"]}),(0,t.jsx)("p",{className:"text-slate-400 text-sm mt-2",children:"Targeted repair for specific Access Requests. Enter the Request ID (e.g., '00000002') to inspect and repair."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"md:col-span-1 space-y-6",children:[(0,t.jsxs)("div",{className:"bg-slate-900/50 backdrop-blur-xl border border-white/10 p-6 rounded-2xl shadow-xl",children:[(0,t.jsx)("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Access Request ID"}),(0,t.jsx)("input",{type:"text",className:"w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-3 text-white outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all",placeholder:"e.g. 0000002",value:m,onChange:e=>p(e.target.value)}),(0,t.jsxs)("button",{onClick:v,disabled:b||!m,className:"w-full mt-6 bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-500 hover:to-teal-500 text-white font-bold py-3 px-4 rounded-xl shadow-lg shadow-emerald-500/20 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[b?(0,t.jsx)(n.Loader2,{className:"h-5 w-5 animate-spin"}):(0,t.jsx)(i.Play,{className:"h-5 w-5 fill-current"}),"Inspect & Repair"]})]}),(0,t.jsxs)("div",{className:"bg-blue-500/10 border border-blue-500/20 p-4 rounded-xl text-sm text-blue-300",children:[(0,t.jsxs)("h4",{className:"font-bold flex items-center gap-2 mb-2",children:[(0,t.jsx)(o,{className:"h-4 w-4"}),"What this does:"]}),(0,t.jsxs)("ul",{className:"list-disc pl-4 space-y-1 opacity-80",children:[(0,t.jsx)("li",{children:"Scans active Identity Requests for the user."}),(0,t.jsx)("li",{children:"Checks underlying Provisioning Projects."}),(0,t.jsx)("li",{children:"Attempts to advance stuck workflows."}),(0,t.jsx)("li",{children:"Terminates hung requests if applicable."})]})]})]}),(0,t.jsx)("div",{className:"md:col-span-2",children:(0,t.jsxs)("div",{className:"bg-black/40 border border-white/10 rounded-2xl flex flex-col h-[500px]",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-white/10 bg-slate-900/60 flex items-center justify-between",children:[(0,t.jsxs)("h3",{className:"font-bold text-white flex items-center gap-2",children:[(0,t.jsx)(d,{className:"h-4 w-4 text-slate-400"}),"Execution Logs"]}),b&&(0,t.jsx)("span",{className:"text-xs text-emerald-400 animate-pulse",children:"Running analysis..."})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-auto p-4 space-y-2 font-mono text-xs custom-scrollbar",children:[0===g.length&&(0,t.jsx)("div",{className:"text-slate-600 italic text-center mt-20",children:"Ready to inspect. Enter an identity to begin."}),g.map((e,s)=>(0,t.jsx)("div",{className:`p-2 rounded border-l-2 ${e.toLowerCase().includes("error")||e.toLowerCase().includes("exception")?"border-rose-500 bg-rose-500/5 text-rose-300":e.toLowerCase().includes("success")||e.toLowerCase().includes("fixed")?"border-emerald-500 bg-emerald-500/5 text-emerald-300":"border-slate-700 text-slate-300"}`,children:e},s))]})]})})]})]})]}):null}function d({className:e}){return(0,t.jsxs)("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("polyline",{points:"4 17 10 11"}),(0,t.jsx)("line",{x1:"12",y1:"19",x2:"20",y2:"19"})]})}e.s(["default",()=>c],91e3)}]);