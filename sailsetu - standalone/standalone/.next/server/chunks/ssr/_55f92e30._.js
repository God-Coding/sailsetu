module.exports=[4720,a=>{"use strict";let b=(0,a.i(60137).default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);a.s(["FileText",()=>b],4720)},87532,a=>{"use strict";let b=(0,a.i(60137).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);a.s(["Search",()=>b],87532)},46842,a=>{"use strict";let b=(0,a.i(60137).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["User",()=>b],46842)},84505,a=>{"use strict";let b=(0,a.i(60137).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);a.s(["Download",()=>b],84505)},62722,a=>{"use strict";let b=(0,a.i(60137).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);a.s(["XCircle",()=>b],62722)},92e3,a=>{"use strict";let b=(0,a.i(60137).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],92e3)},16201,a=>{"use strict";let b=(0,a.i(60137).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],16201)},59330,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(83469),e=a.i(50944),f=a.i(4720),g=a.i(87532),h=a.i(96221),i=a.i(16201),j=a.i(62722),k=a.i(92e3),l=a.i(46842),m=a.i(84505);function n(){let{isAuthenticated:a,url:m,username:n,password:p,isLoading:q}=(0,d.useAuth)(),r=(0,e.useRouter)(),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)({current:0,total:0});if(q)return null;if(!a)return r.push("/"),null;let A=async()=>{let a=s.split("\n").map(a=>a.trim()).filter(Boolean);if(0===a.length)return;x(!0),v([]),z({current:0,total:a.length});let b=[];for(let c=0;c<a.length;c++){let d=a[c];try{let a=await fetch("/api/workflow/launch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:m,username:n,password:p,workflowName:"GetCertificationReport",input:[{key:"identityName",value:d}]})}),c=await a.json();if(c.success){let a=null;if(c.launchResult?.attributes&&(a=c.launchResult.attributes.find(a=>"reportData"===a.key)),!a&&c.launchResult?.["urn:ietf:params:scim:schemas:sailpoint:1.0:LaunchedWorkflow"]?.output&&(a=c.launchResult["urn:ietf:params:scim:schemas:sailpoint:1.0:LaunchedWorkflow"].output.find(a=>"reportData"===a.key)),!a&&c.launchResult?.output&&(a=c.launchResult.output.find(a=>"reportData"===a.key)),a&&a.value)try{let c=JSON.parse(a.value);b.push({identity:d,found:c.length>0,data:c.length>0?c[0]:null})}catch(a){b.push({identity:d,error:"Failed to parse JSON"})}else b.push({identity:d,error:"No report data returned"})}else b.push({identity:d,error:c.error||"Workflow failed"})}catch(a){b.push({identity:d,error:a.message})}z(a=>({...a,current:c+1}))}v(b),x(!1)};return(0,b.jsxs)("main",{className:"min-h-screen bg-[#020617] text-slate-100 font-sans selection:bg-indigo-500/30",children:[(0,b.jsx)("div",{className:"absolute top-0 left-0 w-full h-[500px] bg-gradient-to-b from-blue-950/20 to-transparent pointer-events-none"}),(0,b.jsxs)("div",{className:"max-w-7xl mx-auto p-6 relative z-10",children:[(0,b.jsxs)("div",{className:"mb-8 border-b border-white/5 pb-6",children:[(0,b.jsxs)("h1",{className:"text-3xl font-extrabold bg-gradient-to-r from-white via-slate-200 to-slate-400 bg-clip-text text-transparent flex items-center gap-3",children:[(0,b.jsx)(f.FileText,{className:"h-8 w-8 text-indigo-400"}),"Certification Impact Report"]}),(0,b.jsx)("p",{className:"text-slate-400 text-sm mt-2",children:'Analyze "Before vs. After" states of identity access reviews.'})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-[300px_1fr] gap-8",children:[(0,b.jsx)("div",{className:"space-y-4",children:(0,b.jsxs)("div",{className:"bg-slate-900/40 border border-white/10 p-6 rounded-2xl shadow-xl",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Identities (One per line)"}),(0,b.jsx)("textarea",{value:s,onChange:a=>t(a.target.value),className:"w-full bg-slate-950/50 border border-slate-700 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 outline-none transition-all placeholder:text-slate-600 min-h-[300px] font-mono text-sm",placeholder:"Aaron.Nichols James.Smith ..."}),(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsxs)("button",{onClick:A,disabled:w||!s.trim(),className:"w-full bg-gradient-to-r from-indigo-600 to-violet-600 hover:from-indigo-500 hover:to-violet-500 text-white font-bold py-3 px-6 rounded-xl shadow-lg shadow-indigo-500/20 transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[w?(0,b.jsx)(h.Loader2,{className:"h-5 w-5 animate-spin"}):(0,b.jsx)(g.Search,{className:"h-5 w-5"}),w?"Analyzing...":"Generate Report"]})}),w&&(0,b.jsxs)("div",{className:"mt-4 text-center text-xs text-slate-400",children:["Processed ",y.current," of ",y.total]})]})}),(0,b.jsxs)("div",{className:"space-y-6",children:[0===u.length&&!w&&(0,b.jsxs)("div",{className:"h-full flex flex-col items-center justify-center bg-slate-900/20 border border-white/5 rounded-2xl p-12 text-slate-500",children:[(0,b.jsx)(f.FileText,{className:"h-16 w-16 mb-4 opacity-20"}),(0,b.jsx)("p",{children:"Enter identities and generate a report to see details."})]}),u.map((a,c)=>(0,b.jsxs)("div",{className:"bg-slate-900/40 border border-white/10 rounded-2xl overflow-hidden animate-in fade-in slide-in-from-bottom-4 duration-500",style:{animationDelay:`${100*c}ms`},children:[(0,b.jsxs)("div",{className:"bg-slate-950/50 p-4 border-b border-white/5 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-indigo-500/10 rounded-lg text-indigo-400",children:(0,b.jsx)(l.User,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-bold text-white text-lg",children:a.identity}),a.data&&(0,b.jsx)("p",{className:"text-xs text-slate-400",children:a.data.certName})]})]}),(0,b.jsx)("div",{className:"text-right",children:a.found?(0,b.jsxs)("div",{className:"flex items-center gap-2 text-emerald-400 text-sm bg-emerald-950/30 px-3 py-1 rounded-full border border-emerald-500/20",children:[(0,b.jsx)(i.CheckCircle,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"Review Found"})]}):a.error?(0,b.jsxs)("div",{className:"flex items-center gap-2 text-rose-400 text-sm bg-rose-950/30 px-3 py-1 rounded-full border border-rose-500/20",children:[(0,b.jsx)(j.XCircle,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:a.error})]}):(0,b.jsxs)("div",{className:"flex items-center gap-2 text-amber-400 text-sm bg-amber-950/30 px-3 py-1 rounded-full border border-amber-500/20",children:[(0,b.jsx)(k.AlertCircle,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"No Review History"})]})})]}),a.found&&a.data&&(0,b.jsx)(o,{report:a})]},c))]})]})]})]})}function o({report:a}){let[d,e]=(0,c.useState)("Summary");if(!a.found||!a.data)return null;let f=a.data.items||[],g=f.filter(a=>"Present"===a.before),h=f.filter(a=>!a.after.includes("Revoked")),k=f.filter(a=>a.after.includes("Revoked")),l=f.filter(a=>"Approved"===a.decision);return(0,b.jsxs)("div",{className:"p-0",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-2 border-b border-white/5 bg-slate-900/50",children:[(0,b.jsx)("div",{className:"flex items-center gap-1 overflow-x-auto",children:["Summary","Before Access","After Access","Removed","Approved"].map(a=>(0,b.jsxs)("button",{onClick:()=>e(a),className:`px-4 py-2 rounded-lg text-xs font-bold uppercase tracking-wider transition-all whitespace-nowrap ${d===a?"bg-indigo-500/20 text-indigo-300 border border-indigo-500/30":"text-slate-500 hover:bg-white/5 hover:text-slate-300"}`,children:[a,"Before Access"===a&&(0,b.jsx)("span",{className:"ml-2 opacity-50",children:g.length}),"After Access"===a&&(0,b.jsx)("span",{className:"ml-2 opacity-50",children:h.length}),"Removed"===a&&(0,b.jsx)("span",{className:"ml-2 opacity-50",children:k.length}),"Approved"===a&&(0,b.jsx)("span",{className:"ml-2 opacity-50",children:l.length})]},a))}),(0,b.jsxs)("button",{onClick:()=>{if(!a.found||!a.data||!a.data.items)return;let b=new Blob([["Identity,Access Item,Type,Decision,Actor,Before State,After State",...a.data.items.map(b=>[a.identity,b.name,b.type,b.decision,b.actor,b.before,b.after]).map(a=>a.map(a=>`"${String(a||"").replace(/"/g,'""')}"`).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),c=document.createElement("a"),d=URL.createObjectURL(b);c.setAttribute("href",d),c.setAttribute("download",`Certification_Report_${a.identity}.csv`),c.style.visibility="hidden",document.body.appendChild(c),c.click(),document.body.removeChild(c)},className:"flex items-center gap-2 px-3 py-1.5 text-xs font-bold text-slate-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors ml-2",title:"Download CSV",children:[(0,b.jsx)(m.Download,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"CSV"})]})]}),(0,b.jsxs)("div",{className:"p-0",children:["Summary"===d&&(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-6",children:[(0,b.jsxs)("div",{className:"bg-slate-950/50 p-4 rounded-xl border border-white/5 flex flex-col items-center justify-center text-center",children:[(0,b.jsx)("span",{className:"text-3xl font-bold text-slate-200 mb-1",children:g.length}),(0,b.jsx)("span",{className:"text-xs text-slate-500 uppercase font-bold tracking-widest",children:"Pre-Cert"})]}),(0,b.jsxs)("div",{className:"bg-emerald-950/10 p-4 rounded-xl border border-emerald-500/20 flex flex-col items-center justify-center text-center",children:[(0,b.jsx)("span",{className:"text-3xl font-bold text-emerald-400 mb-1",children:h.length}),(0,b.jsx)("span",{className:"text-xs text-emerald-500/60 uppercase font-bold tracking-widest",children:"Post-Cert"})]}),(0,b.jsxs)("div",{className:"bg-rose-950/10 p-4 rounded-xl border border-rose-500/20 flex flex-col items-center justify-center text-center",children:[(0,b.jsx)("span",{className:"text-3xl font-bold text-rose-400 mb-1",children:k.length}),(0,b.jsx)("span",{className:"text-xs text-rose-500/60 uppercase font-bold tracking-widest",children:"Revoked"})]}),(0,b.jsxs)("div",{className:"bg-indigo-950/10 p-4 rounded-xl border border-indigo-500/20 flex flex-col items-center justify-center text-center",children:[(0,b.jsx)("span",{className:"text-3xl font-bold text-indigo-400 mb-1",children:l.length}),(0,b.jsx)("span",{className:"text-xs text-indigo-500/60 uppercase font-bold tracking-widest",children:"Approved"})]})]}),"Summary"!==d&&(0,b.jsxs)("div",{className:"max-h-[500px] overflow-y-auto custom-scrollbar",children:[(0,b.jsxs)("table",{className:"w-full text-left text-sm text-slate-400",children:[(0,b.jsx)("thead",{className:"bg-slate-950 text-xs uppercase font-medium text-slate-500 sticky top-0",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3",children:"Access Item"}),(0,b.jsx)("th",{className:"px-6 py-3",children:"Type"}),(0,b.jsx)("th",{className:"px-6 py-3",children:"Review Outcome"}),(0,b.jsx)("th",{className:"px-6 py-3",children:"Reviewer"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-white/5",children:("Before Access"===d?g:"After Access"===d?h:"Removed"===d?k:l).map((a,c)=>(0,b.jsxs)("tr",{className:"hover:bg-white/5 transition-colors group",children:[(0,b.jsx)("td",{className:"px-6 py-3 font-medium text-slate-300 group-hover:text-white transition-colors",children:a.name}),(0,b.jsx)("td",{className:"px-6 py-3",children:(0,b.jsx)("span",{className:`text-[10px] px-2 py-0.5 rounded-full uppercase border ${"Role"===a.type?"bg-purple-500/10 text-purple-400 border-purple-500/20":"bg-blue-500/10 text-blue-400 border-blue-500/20"}`,children:a.type})}),(0,b.jsx)("td",{className:"px-6 py-3",children:a.after.includes("Revoked")?(0,b.jsxs)("span",{className:"text-rose-400 inline-flex items-center gap-1.5 bg-rose-950/20 px-2 py-0.5 rounded text-xs border border-rose-500/20",children:[(0,b.jsx)(j.XCircle,{className:"h-3 w-3"})," Revoked"]}):"Approved"===a.decision?(0,b.jsxs)("span",{className:"text-emerald-400 inline-flex items-center gap-1.5 bg-emerald-950/20 px-2 py-0.5 rounded text-xs border border-emerald-500/20",children:[(0,b.jsx)(i.CheckCircle,{className:"h-3 w-3"})," Approved"]}):(0,b.jsx)("span",{className:"text-slate-500 text-xs italic",children:"Retained (No Action)"})}),(0,b.jsx)("td",{className:"px-6 py-3 text-xs font-mono text-slate-500",children:"Pending"!==a.actor&&"N/A"!==a.actor?a.actor:"-"})]},c))})]}),0===("Before Access"===d?g:"After Access"===d?h:"Removed"===d?k:l).length&&(0,b.jsx)("div",{className:"p-8 text-center text-slate-500 text-sm italic",children:"No items found in this category."})]})]})]})}a.s(["default",()=>n])}];

//# sourceMappingURL=_55f92e30._.js.map