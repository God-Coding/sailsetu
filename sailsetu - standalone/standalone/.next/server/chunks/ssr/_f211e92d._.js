module.exports=[96221,a=>{"use strict";let b=(0,a.i(60137).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},84505,a=>{"use strict";let b=(0,a.i(60137).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);a.s(["Download",()=>b],84505)},53388,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(71478),e=a.i(60137);let f=(0,e.default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var g=a.i(82434),h=a.i(96221),i=a.i(84505),j=a.i(5784);let k=(0,e.default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);function l(){let{isAuthenticated:a,url:e,username:l,password:m}=(0,d.useAuth)(),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)([{role:"assistant",content:"Hello! I can help you run IdentityIQ reports. Try asking:\n- \"Members of 'Admins' group\"\n- \"Access for user 'James.Smith'\""}]),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)([]);(0,c.useEffect)(()=>{a&&v()},[a]);let v=async()=>{try{let a=await fetch("/api/workflow/launch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e,username:l,password:m,workflowName:"GetAllReports",input:[]})}),b=await a.json();if(b.success&&b.launchResult?.attributes){let a=b.launchResult.attributes.find(a=>"reportList"===a.key)?.value;a&&u(JSON.parse(a))}}catch(a){console.error("Failed to load reports",a)}},w=async()=>{if(!n.trim())return;let a={role:"user",content:n};q(b=>[...b,a]),o(""),s(!0);try{q(a=>[...a,{role:"assistant",content:"Thinking..."}]);let b=await fetch("/api/ai-reports",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:a.content,url:e,username:l,password:m})}),c=await b.json();if(c.success||c.launchResult){if(c.debug){let a=`ðŸ” **AI Debug Info**
**Query:** ${c.debug.query}
**Registry:** ${c.debug.registryCount} reports loaded
**Sample Reports:** ${c.debug.registrySample?.map(a=>a.name).join(", ")}
**AI Decision:**
- Report: ${c.debug.aiDecision?.reportName}
- Arguments: ${JSON.stringify(c.debug.aiDecision?.reportArgs,null,2)}`;q(b=>{let c=[...b];return"Thinking..."===c[c.length-1].content&&c.pop(),[...c,{role:"assistant",content:a,isDebug:!0,collapsed:!0}]})}await x(c,"AI Selected Report")}else q(a=>{let b=[...a];return"Thinking..."===b[b.length-1].content&&b.pop(),[...b,{role:"assistant",content:c.error||c.message||"I couldn't process that request."}]})}catch(a){q(b=>[...b,{role:"assistant",content:`Error: ${a.message}`}])}finally{s(!1)}},x=async(a,b)=>{q(a=>{let b=[...a];return"Thinking..."===b[b.length-1].content&&b.pop(),b});let c=null;if(a.launchResult?.attributes){let b=a.launchResult.attributes.find(a=>"launchResult"===a.key)?.value;b&&(c=JSON.parse(b))}else if(a.launchResult&&"string"==typeof a.launchResult)try{c=JSON.parse(a.launchResult)}catch(a){}if(c){let a=c.completionStatus,b=c.messages||[],d="";b.length>0&&(d="\n**Messages:** "+b.map(a=>"string"==typeof a?a:a&&"object"==typeof a?JSON.stringify(a):String(a)).join(", "));let e=c.fileName||"report.csv";if(c.fileContent)try{let b=atob(c.fileContent),d=Array(b.length);for(let a=0;a<b.length;a++)d[a]=b.charCodeAt(a);let f=new Uint8Array(d),g=new Blob([f],{type:c.contentType||"application/octet-stream"}),h=window.URL.createObjectURL(g),i=Math.round(g.size/1024);q(b=>[...b,{role:"assistant",content:`âœ… **Report Generated Successfully!**

**File:** ${e}
**Size:** ${i} KB
**Status:** ${a}`,downloadUrl:h,fileName:e}])}catch(a){q(b=>[...b,{role:"assistant",content:`Report completed but failed to process file: ${a}`}])}else q(b=>[...b,{role:"assistant",content:`Report finished with status: **${a}**${d}.
(No content returned - maybe no matches?)`}])}else q(a=>[...a,{role:"assistant",content:"Workflow launched, but no immediate result returned."}])};return(0,b.jsx)("main",{className:"min-h-screen bg-[#020617] text-slate-100 font-sans p-6 flex flex-col items-center",children:(0,b.jsxs)("div",{className:"w-full max-w-4xl flex-1 flex flex-col bg-slate-900/50 border border-white/10 rounded-2xl overflow-hidden shadow-2xl",children:[(0,b.jsxs)("div",{className:"p-4 border-b border-white/10 bg-slate-950/50 flex items-center gap-3",children:[(0,b.jsx)(g.Bot,{className:"h-6 w-6 text-indigo-400"}),(0,b.jsx)("h1",{className:"font-bold text-lg",children:"AI Report Assistant"}),(0,b.jsxs)("span",{className:"text-xs text-slate-500 ml-auto",children:[t.length," reports loaded"]})]}),(0,b.jsxs)("div",{className:"flex-1 p-6 overflow-y-auto space-y-4 custom-scrollbar",children:[p.map((a,c)=>(0,b.jsx)("div",{className:`flex ${"user"===a.role?"justify-end":"justify-start"}`,children:(0,b.jsxs)("div",{className:`max-w-[80%] p-4 rounded-2xl ${"user"===a.role?"bg-indigo-600 text-white rounded-br-none":"bg-slate-800 text-slate-200 rounded-bl-none border border-white/5"}`,children:[a.isDebug?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("button",{onClick:()=>{q(a=>a.map((a,b)=>b===c?{...a,collapsed:!a.collapsed}:a))},className:"flex items-center gap-2 text-sm font-medium text-indigo-300 hover:text-indigo-200 w-full text-left",children:[a.collapsed?(0,b.jsx)(j.ChevronDown,{className:"h-4 w-4"}):(0,b.jsx)(k,{className:"h-4 w-4"}),"ðŸ” AI Debug Info"]}),!a.collapsed&&(0,b.jsx)("div",{className:"mt-3 whitespace-pre-wrap text-xs text-slate-300 bg-slate-900/50 p-3 rounded border border-white/5",children:a.content})]}):(0,b.jsx)("div",{className:"whitespace-pre-wrap",children:a.content}),a.downloadUrl&&(0,b.jsxs)("button",{onClick:()=>{let b=document.createElement("a");b.href=a.downloadUrl,b.download=a.fileName||"report.csv",document.body.appendChild(b),b.click(),document.body.removeChild(b)},className:"mt-3 flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg text-sm font-medium transition-colors",children:[(0,b.jsx)(i.Download,{className:"h-4 w-4"}),"Download ",a.fileName]})]})},c)),r&&(0,b.jsx)("div",{className:"flex justify-start",children:(0,b.jsxs)("div",{className:"bg-slate-800 p-4 rounded-2xl rounded-bl-none border border-white/5 flex items-center gap-2",children:[(0,b.jsx)(h.Loader2,{className:"h-4 w-4 animate-spin text-indigo-400"}),(0,b.jsx)("span",{className:"text-xs text-slate-400",children:"Processing..."})]})})]}),(0,b.jsx)("div",{className:"p-4 bg-slate-950/50 border-t border-white/10",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:"text",value:n,onChange:a=>o(a.target.value),onKeyDown:a=>"Enter"===a.key&&w(),placeholder:"Describe the report you want...",className:"flex-1 bg-slate-900 border border-slate-700 rounded-xl px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500/50 outline-none",disabled:r}),(0,b.jsx)("button",{onClick:w,disabled:r||!n.trim(),className:"bg-indigo-600 hover:bg-indigo-500 text-white p-3 rounded-xl transition-colors disabled:opacity-50",children:(0,b.jsx)(f,{className:"h-5 w-5"})})]})})]})})}a.s(["default",()=>l],53388)}];

//# sourceMappingURL=_f211e92d._.js.map